<div class="modal fade" id="changePassword" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3 class="modal-title" id="modal-title">Endre passord</h3>
      </div>
      <div class="modal-body" id="modal-body">
        <form name="changePasswordForm" autocomplete="off">
          <div class="form-group" ng-class="{'has-error':(changePasswordForm.oldPassword.$touched && changePasswordForm.oldPassword.$invalid && !ctrl.submitted)}">
            <label class="control-label" for="oldPassword">Gammelt passord</label>
            <input type="password" class="form-control" name="oldPassword" ng-model="ctrl.oldPassword" required>
            <div ng-messages="changePasswordForm.oldPassword.$error">
              <span class="help-block" ng-message="required" ng-if="changePasswordForm.oldPassword.$touched && !ctrl.submitted" ng-message="required">Gammelt passord er påkrevd</span>
            </div>
          </div>
          <div class="form-group" ng-class="{'has-error':(changePasswordForm.newPassword.$touched && ctrl.newPassword==ctrl.oldPassword && !ctrl.submitted)|| (changePasswordForm.newPassword.$touched && changePasswordForm.newPassword.$invalid && !ctrl.submitted)}">
            <label class="control-label" for="newPassword">Nytt passord</label>
            <input type="password" class="form-control" name="newPassword" ng-model="ctrl.newPassword" ng-pattern="/^(?=.*\d)(?=.*[A-Z]).{6,20}$/" ng-change="ctrl.disableSave()" required>
            <div ng-messages="changePasswordForm.newPassword.$error">
              <span class="help-block" ng-message="required" ng-if="changePasswordForm.newPassword.$touched && changePasswordForm.newPassword.$invalid && !ctrl.submitted" ng-message="required">Nytt passord er påkrevd</span>
              <span class="help-block" ng-message="pattern" ng-if="changePasswordForm.newPassword.$touched && changePasswordForm.newPassword.$invalid && !ctrl.submitted" ng-message="required">Passord må ha minst en stor bokstav, et tall og være mellom 6 og 20 tegn.</span>
            </div>
            <div ng-show="changePasswordForm.newPassword.$touched && ctrl.newPassword">
              <span class="help-block" ng-show="changePasswordForm.newPassword.$touched && ctrl.newPassword==ctrl.oldPassword&& !ctrl.submitted">Det nye passordet er det samme som det gamle</span>
            </div>
          </div>
          <div class="form-group" ng-class="{'has-error':(changePasswordForm.repeatNewPassword.$touched && changePasswordForm.repeatNewPassword.$invalid && !ctrl.submitted) || (changePasswordForm.repeatNewPassword.$touched && ctrl.newPassword!=ctrl.repeatNewPassword && !ctrl.submitted && ctrl.newPassword)}">
            <label class="control-label" for="repeatNewPassword">Gjenta nytt passord</label>
            <input type="password" class="form-control" name="repeatNewPassword" ng-model="ctrl.repeatNewPassword" required>
            <div ng-messages="changePasswordForm.repeatNewPassword.$error">
              <span class="help-block" ng-message="required" ng-if="(changePasswordForm.repeatNewPassword.$touched && changePasswordForm.repeatNewPassword.$invalid && !ctrl.submitted)">Vennligst bekreft passordet ditt</span>
              <div ng-show="ctrl.newPassword && changePasswordForm.repeatNewPassword && ctrl.repeatNewPassword && !ctrl.submitted">
                <span class="help-block" ng-show="(changePasswordForm.repeatNewPassword.$touched && ctrl.newPassword!=ctrl.repeatNewPassword && !ctrl.submitted)">Passordene stemmer ikke overens</span>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="ctrl.changePasswordSave()" ng-disabled="util.disableChangePwdBtn(ctrl.oldPassword,ctrl.newPassword,ctrl.repeatNewPassword)" double-Click timeout="8000">Lagre</button>
        <button class="btn btn-default" type="button" data-dismiss="modal" ng-click="ctrl.changePasswordCancel()">Avbryt</button>
      </div>
    </div>
  </div>
</div>
